BEGIN PROGRAM

    FUNCTION create_question(difficulty):
        IF difficulty = "easy":
            number_range ← (1, 10)
        ELSE IF difficulty = "medium":
            number_range ← (1, 25)
        ELSE:
            number_range ← (1, 50)

        num1 ← RANDOM number in number_range
        num2 ← RANDOM number in number_range
        operator ← RANDOM choice from ["+", "-", "*"]
        expression ← num1 operator num2
        correct_answer ← EVALUATE(expression)
        RETURN expression, correct_answer
    END FUNCTION


    FUNCTION ask_question(expression, correct_answer):
        DISPLAY expression
        start_time ← CURRENT TIME

        TRY
            // ❌ Error 1: user input stored as string, not converted to integer
            user_input ← INPUT("Your answer: ")
        CATCH invalid input:
            DISPLAY "Invalid input"
            RETURN 0, None, (CURRENT TIME - start_time)

        end_time ← CURRENT TIME
        elapsed_time ← end_time - start_time

        // ❌ Error 2: compares string to integer
        IF user_input = correct_answer THEN
            IF elapsed_time ≤ 5 THEN
                score ← 2
            ELSE:
                score ← 1
            END IF
            DISPLAY "Correct, score awarded"
        ELSE:
            score ← 0
            // ❌ Error 3: incorrect variable name 'correct_ansewr'
            DISPLAY "Incorrect, the correct answer was correct_ansewr"
        END IF

        RETURN score, user_input, elapsed_time
    END FUNCTION


    FUNCTION maths_quiz():
        DISPLAY "Welcome to the Maths Quiz"
        DISPLAY "Select difficulty (1, 2, or 3)"

        REPEAT
            choice ← INPUT
            IF choice = "1":
                difficulty ← "easy"
                total_questions ← 5
                BREAK
            ELSE IF choice = "2":
                difficulty ← "medium"
                total_questions ← 8
                BREAK
            ELSE IF choice = "3":
                difficulty ← "hard"
                total_questions ← 12
                BREAK
            ELSE:
                DISPLAY "Invalid selection"
        UNTIL valid choice chosen

        total_score ← 0
        results ← empty list

        FOR question_number FROM 1 TO total_questions DO
            expression, correct_answer ← create_question(difficulty)
            score, user_input, elapsed_time ← ask_question(expression, correct_answer)
            total_score ← total_score + score
            APPEND (expression, correct_answer, user_input, score, elapsed_time) TO results
        END FOR

        // ❌ Error 4: wrong formula for percentage
        percentage ← (total_score * (total_questions * 2)) * 100

        DISPLAY "Quiz Completed"
        DISPLAY "Final Score: total_score / (total_questions * 2)"
        DISPLAY "Percentage: percentage %"

        DISPLAY "Question Breakdown"
        FOR EACH record IN results DO
            DISPLAY record
        END FOR
    END FUNCTION


    CALL maths_quiz()

END PROGRAM
